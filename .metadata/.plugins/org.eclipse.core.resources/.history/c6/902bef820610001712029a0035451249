import java.io.IOException;

/**
 * Class that is responsible for reading images, feeding them into Kmeans, and
 * writing output images based on kMean classes. 
 * 
 * @author Jack Steketee, Mike Eckmann
 */
public class ClusterProg {
	public static void main(String args[]) throws IOException {
		
		String imageName = args[0];
		int K = Integer.parseInt(args[1]);
		
		RGBImage inputImg = new RGBImage(imageName);

		//KMeans Object for RGB distance comparison. 
		KMeans km = new KMeans(K, 3, inputImg.getNumRows(), inputImg.getNumCols(), KMeansType.RGBEuclidianDistance);
		
		
		// write code to compute the characteristics of each pixel and then
		// assign those properties for that pixel
		double[] RGBVals = new double[3];
		for (int r = 0; r < inputImg.getNumRows(); r++) {
			for (int c = 0; c < inputImg.getNumCols(); c++) {
				RGBVals[0] = inputImg.getPixel(r, c).getRed();
				RGBVals[1] = inputImg.getPixel(r, c).getGreen();
				RGBVals[2] = inputImg.getPixel(r, c).getBlue();
				km.assignPixelProperties(r, c, RGBVals);
			}
		}

		RGBImage labelledImage = km.runKmeans();
		labelledImage.writeImage("segmentedByColorK" + args[1] + "-" + args[0]);
	}
}
